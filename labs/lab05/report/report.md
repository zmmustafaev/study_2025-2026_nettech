---
## Front matter
title: "Отчёт по лабораторной работе 5"
subtitle: "Простые сети в GNS3. Анализ трафика"
author: "Заур Мустафаев"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

Построение простейших моделей сети на базе коммутатора и маршрутизаторов FRR и VyOS в GNS3, анализ трафика посредством Wireshark.

# Выполнение работы

## Создание топологии сети в GNS3

1. В среде **GNS3** был создан новый проект.  
   На рабочем поле размещены два устройства **VPCS** и один **Ethernet switch**.  
   Для всех узлов были изменены имена с указанием фамилии пользователя:
   - **PC1-zmustafaev**  
   - **msk-zmustafaev-sw-01**  
   - **PC2-zmustafaev**  

   Узлы соединены между собой с помощью Ethernet-соединений, что обеспечило логическую топологию "звезда".  
   Интерфейсы соединений отображены на схеме.

   ![Созданная топология в GNS3](01.png){ #fig:001 width=80% }

## Настройка IP-адресов узлов VPCS

2. На узле **PC1-zmustafaev** с помощью терминала **Console** выполнена настройка IP-адреса и шлюза по умолчанию.  
   Для просмотра доступных команд введена команда `?`.  
   Затем выполнена настройка IP:
   `ip 192.168.1.11/24 192.168.1.1`  
   После проверки отсутствия дубликатов адресов, система подтвердила успешное назначение IP.

   ![Назначение IP-адреса для PC1](02.png){ #fig:002 width=70% }

3. Аналогичные действия были выполнены для **PC2-zmustafaev**, которому назначен адрес:  
   `ip 192.168.1.12/24 192.168.1.1`  
   `save`  
   После сохранения конфигурации проверено соединение между узлами командой `ping 192.168.1.11`.  
   Эхо-запросы прошли успешно, что подтверждает работоспособность сети.

   ![Проверка соединения между узлами](03.png){ #fig:003 width=70% }

## Анализ трафика ARP в Wireshark

4. На соединении между **PC1** и коммутатором был запущен захват трафика с помощью **Wireshark**.  
   После запуска узлов в окне анализа отобразились **ARP-пакеты**, используемые для определения MAC-адресов соседей в локальной сети.  
   В захваченных данных видны **Gratuitous ARP** и **ARP Request**, отправленные с IP 192.168.1.12 и 192.168.1.11 соответственно.

   ![Захват ARP-трафика в Wireshark](04.png){ #fig:004 width=85% }

## Анализ ICMP-трафика

5. На **PC2** были изучены параметры команды `ping /?`, после чего выполнен один эхо-запрос к **PC1** в **ICMP-режиме**:  
   `ping 192.168.1.11 -c 1`  
   Запрос прошёл успешно, что подтверждается ответом `ttl=64`.  
   В **Wireshark** зафиксированы ICMP Echo Request и Echo Reply между адресами 192.168.1.12 и 192.168.1.11.

   ![ICMP Echo Request и Reply в Wireshark](05.png){ #fig:005 width=85% }

## Анализ UDP-трафика

6. Выполнен **UDP-эхо-запрос**:  
   `ping 192.168.1.11 -c 1 -2`  
   В **Wireshark** отображены пакеты с **протоколом UDP**, использующим **порт 7 (Echo)**.  
   Видно, что PC2 отправил запрос с порта 32551 на порт 7 узла PC1, после чего был получен ответ.

   ![UDP Echo Request и Response в Wireshark](06.png){ #fig:006 width=85% }

## Анализ TCP-трафика

7. Для проверки TCP-взаимодействия между узлами выполнена команда:  
   `ping 192.168.1.11 -c 1 -3`  
   В **Wireshark** отображена трёхфазная установка соединения (**SYN → SYN/ACK → ACK**) и последующий обмен TCP-пакетами.  
   Также виден корректный **FIN/ACK** при завершении сессии.

   ![TCP сеанс и завершение соединения](07.png){ #fig:007 width=85% }
   ![Детализация TCP-пакета в Wireshark](08.png){ #fig:008 width=85% }

## Моделирование простейшей сети на базе маршрутизатора FRR в GNS3

### Создание топологии

1. В среде **GNS3** был создан новый проект.  
   В рабочей области размещены три устройства:  
   - **PC1-zmustafaev**  
   - **msk-zmustafaev-sw-01**  
   - **msk-zmustafaev-gw-01**  

   Все устройства соединены через коммутатор, что позволило сформировать простейшую сеть с одним маршрутизатором.  

### Настройка IP-адресации на узле PC1

2. Для устройства **PC1-zmustafaev** задан IP-адрес, шлюз и сохранена конфигурация.  
   Проверка текущих параметров сети выполнена командой `show ip`.  
   Назначенные параметры:  
   - **IP-адрес:** 192.168.1.10/24  
   - **Шлюз:** 192.168.1.1  

   ![Настройка IP-адресации на PC1](09.png){ #fig:009 width=70% }

### Настройка маршрутизатора FRR

3. На маршрутизаторе **msk-zmustafaev-gw-01** выполнена базовая конфигурация.  
   Установлено имя узла, активирован интерфейс **eth0**, которому присвоен адрес **192.168.1.1/24**, и включено его состояние (`no shutdown`).  
   Конфигурация сохранена в `/etc/frr/frr.conf`.

   ![Настройка маршрутизатора FRR](10.png){ #fig:010 width=70% }

4. Проверка конфигурации показала, что интерфейс **eth0** находится в состоянии **up** и имеет адрес **192.168.1.1/24**.  

   ![Проверка интерфейсов FRR](11.png){ #fig:011 width=70% }

### Проверка соединения

5. С узла **PC1-zmustafaev** выполнена проверка связи с маршрутизатором:  
   `ping 192.168.1.1`  
   Все пакеты успешно получены, что подтверждает корректность IP-настройки и функционирование маршрутизации.  

   ![Успешная проверка связи с маршрутизатором FRR](12.png){ #fig:012 width=70% }

### Анализ ICMP-трафика в Wireshark

6. В **Wireshark** был запущен захват пакетов на канале между коммутатором и маршрутизатором.  
   На графике видны **ICMP Echo Request** и **ICMP Echo Reply** между IP-адресами 192.168.1.10 и 192.168.1.1, что свидетельствует о корректной работе сетевого обмена на уровне ICMP.  

   ![ICMP-трафик между PC1 и FRR](13.png){ #fig:013 width=85% }

## Моделирование простейшей сети на базе маршрутизатора VyOS в GNS3

### Создание топологии

1. В среде **GNS3** создана аналогичная топология с маршрутизатором **VyOS**.  
   В схему включены устройства:
   - **PC1-zmustafaev**  
   - **msk-zmustafaev-sw-01**  
   - **msk-zmustafaev-gw-01 (VyOS)**  

   Устройства соединены через коммутатор Ethernet.  

### Настройка маршрутизатора VyOS

2. После входа под пользователем **vyos** выполнена настройка маршрутизатора:
   - Изменено имя устройства: `msk-zmustafaev-gw-01`
   - Задан IP-адрес интерфейса **eth0:** `192.168.1.1/24`
   - Удалён DHCP-адрес с интерфейса  
   - Конфигурация сохранена и применена командами `commit` и `save`

   ![Настройка маршрутизатора VyOS](14.png){ #fig:014 width=80% }

3. Проверка конфигурации маршрутизатора показала наличие активного интерфейса **eth0** с назначенным IP-адресом **192.168.1.1/24**.  

   ![Проверка интерфейсов маршрутизатора VyOS](15.png){ #fig:015 width=80% }

### Проверка соединения

4. На узле **PC1-zmustafaev** выполнена команда `ping 192.168.1.1`.  
   Все эхо-запросы успешно доставлены, что подтверждает корректную работу маршрутизатора VyOS и связь между устройствами.  

   ![Успешный обмен ICMP-пакетами с маршрутизатором VyOS](16.png){ #fig:016 width=70% }

### Анализ трафика в Wireshark

5. При анализе пакетов с помощью **Wireshark** зафиксированы обмены ICMP-запросами и ответами между узлами **192.168.1.10** и **192.168.1.1**, а также ARP-запросы, направленные на определение MAC-адресов узлов.  
   Это подтверждает правильную работу стека протоколов и успешное взаимодействие устройств.  

   ![Анализ ICMP и ARP-трафика между PC1 и VyOS](17.png){ #fig:017 width=85% }

# Вывод

В результате лабораторной работы были смоделированы две простейшие сети на базе маршрутизаторов **FRR** и **VyOS**.  
Для обеих схем успешно выполнена IP-настройка, проверена связность и проведён анализ ICMP- и ARP-трафика.  
Результаты подтверждают корректную работу сетевой инфраструктуры, функционирование протоколов нижних уровней и правильную конфигурацию маршрутизаторов.
